 <!-- 04_Hello Map in Udacity and Google's Maps API Course, Lesson 1 -->
<!DOCTYPE html>
<html>
<head>

 <!-- styles put here, but you can include a CSS file and reference it instead! -->
    <style type="text/css">

        html,body {
            font-family: Arial, sans-serif;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #map {
            height: 100%;
        }

    </style>
</head>
<body>

<!-- TODO 1: Create a place to put the map in the HTML-->
<div id="map"></div>
<script>


    var map;
    // creating a new blank array for all the listing markers
    var markers=[];


    function initMap(){
        // constructo creates a new map - only center and zoom are required
        map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: 40.7413549, lng: -73.9980244},
            zoom: 13
        });
        // // this will display only one location with marker and infowindow anchored to marker
        // // putting marker on location
        // var tribeca= {lat: 40.719526, lng: -74.0089934};
        // var marker= new google.maps.Marker({
        //     position: tribeca,
        //     map: map,
        //     title: 'First Marker!'
        // });
        // // putting infowindow on marker
        // var infoWindow=new google.maps.InfoWindow({
        //     content: "Do u ever feel like an InfoWindow, floatingthrouh the wind,"+" ready to start again?"
        // });
        // // adding event listener for displaying infowindow when clicked on marker
        // marker.addListener("click",function(){
        //     infoWindow.open(map,marker);
        // });



        // showing bunch of locations
        var locations = [
          {title: 'Park Ave Penthouse', location: {lat: 40.7713024, lng: -73.9632393}},
          {title: 'Chelsea Loft', location: {lat: 40.7444883, lng: -73.9949465}},
          {title: 'Union Square Open Floor Plan', location: {lat: 40.7347062, lng: -73.9895759}},
          {title: 'East Village Hip Studio', location: {lat: 40.7281777, lng: -73.984377}},
          {title: 'TriBeCa Artsy Bachelor Pad', location: {lat: 40.7195264, lng: -74.0089934}},
          {title: 'Chinatown Homey Space', location: {lat: 40.7180628, lng: -73.9961237}}
        ];

        var largeInfowindow = new google.maps.InfoWindow();
        var bounds = new google.maps.LatLngBounds();

        for(var i=0;i<locations.length;i++){
            var position=locations[i].location;
            var title=locations[i].title;
            var marker=new google.maps.Marker({
                position:position,
                map:map,
                title:title,
                animation:google.maps.Animation.Drop,
                id:i
            });
            // push the marker to our array of markers.
            markers.push(marker);
                        // create an on click event toopen an inowindow at each marker.

             marker.addListener('click',function(){
             populateInfoWindow(this,largeInfowindow);

            });
            // extend the boundaries of the map for each marker
            bounds.extend(markers[i].position);


        }
                     // Extend the boundaries of the map for each marker
        map.fitBounds(bounds);
        // this function will populate the infowindow when the marker is clicked. We'll only allow one infowindow which will open at the marker that is clicked, and populate based on that markers position
        function populateInfoWindow(marker, infowindow){
            if (infowindow.marker !=marker){
                infowindow.marker=marker;
                infowindow.setContent('<div>'+marker.title+'</div>');
                infowindow.open(map, marker);
                // make sure the marker property is cleared if the infowindow is closed.
                infowindow.addListener('closeclick',function(){
                    infowindow.setMarker=null;
                }) ;
            }
        }
    }


</script>

<!--TODO: Load the JS API ASYNCHRONOUSLY below.-->
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDiKFNMFScgAJmrCx5mX8r4WMHMzelMa00&v=3&callback=initMap">
</script>
</body>
</html>